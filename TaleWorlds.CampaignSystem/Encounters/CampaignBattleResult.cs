using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Encounters
{
	// Token: 0x02000290 RID: 656
	public class CampaignBattleResult
	{
		// Token: 0x060023AC RID: 9132 RVA: 0x00096CFA File Offset: 0x00094EFA
		internal static void AutoGeneratedStaticCollectObjectsCampaignBattleResult(object o, List<object> collectedObjects)
		{
			((CampaignBattleResult)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x060023AD RID: 9133 RVA: 0x00096D08 File Offset: 0x00094F08
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
		}

		// Token: 0x060023AE RID: 9134 RVA: 0x00096D0A File Offset: 0x00094F0A
		internal static object AutoGeneratedGetMemberValuePlayerVictory(object o)
		{
			return ((CampaignBattleResult)o).PlayerVictory;
		}

		// Token: 0x060023AF RID: 9135 RVA: 0x00096D1C File Offset: 0x00094F1C
		internal static object AutoGeneratedGetMemberValuePlayerDefeat(object o)
		{
			return ((CampaignBattleResult)o).PlayerDefeat;
		}

		// Token: 0x060023B0 RID: 9136 RVA: 0x00096D2E File Offset: 0x00094F2E
		internal static object AutoGeneratedGetMemberValueEnemyPulledBack(object o)
		{
			return ((CampaignBattleResult)o).EnemyPulledBack;
		}

		// Token: 0x060023B1 RID: 9137 RVA: 0x00096D40 File Offset: 0x00094F40
		internal static object AutoGeneratedGetMemberValueEnemyRetreated(object o)
		{
			return ((CampaignBattleResult)o).EnemyRetreated;
		}

		// Token: 0x170008E1 RID: 2273
		// (get) Token: 0x060023B2 RID: 9138 RVA: 0x00096D52 File Offset: 0x00094F52
		// (set) Token: 0x060023B3 RID: 9139 RVA: 0x00096D5A File Offset: 0x00094F5A
		[SaveableProperty(0)]
		public bool PlayerVictory { get; private set; }

		// Token: 0x170008E2 RID: 2274
		// (get) Token: 0x060023B4 RID: 9140 RVA: 0x00096D63 File Offset: 0x00094F63
		// (set) Token: 0x060023B5 RID: 9141 RVA: 0x00096D6B File Offset: 0x00094F6B
		[SaveableProperty(1)]
		public bool PlayerDefeat { get; private set; }

		// Token: 0x170008E3 RID: 2275
		// (get) Token: 0x060023B6 RID: 9142 RVA: 0x00096D74 File Offset: 0x00094F74
		// (set) Token: 0x060023B7 RID: 9143 RVA: 0x00096D7C File Offset: 0x00094F7C
		[SaveableProperty(2)]
		public bool EnemyPulledBack { get; private set; }

		// Token: 0x170008E4 RID: 2276
		// (get) Token: 0x060023B8 RID: 9144 RVA: 0x00096D85 File Offset: 0x00094F85
		// (set) Token: 0x060023B9 RID: 9145 RVA: 0x00096D8D File Offset: 0x00094F8D
		[SaveableProperty(3)]
		public bool EnemyRetreated { get; private set; }

		// Token: 0x170008E5 RID: 2277
		// (get) Token: 0x060023BA RID: 9146 RVA: 0x00096D96 File Offset: 0x00094F96
		public bool BattleResolved
		{
			get
			{
				return this.PlayerVictory || this.PlayerDefeat;
			}
		}

		// Token: 0x060023BB RID: 9147 RVA: 0x00096DA8 File Offset: 0x00094FA8
		public static CampaignBattleResult GetResult(BattleState winnerSide, bool enemyRetreated = false)
		{
			if (PlayerEncounter.Current != null)
			{
				CampaignBattleResult campaignBattleResult = new CampaignBattleResult();
				if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender))
				{
					campaignBattleResult.PlayerVictory = true;
				}
				else if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker))
				{
					campaignBattleResult.PlayerDefeat = true;
				}
				else if (winnerSide == BattleState.DefenderPullBack && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker)
				{
					campaignBattleResult.EnemyPulledBack = true;
				}
				campaignBattleResult.EnemyRetreated = enemyRetreated;
				return campaignBattleResult;
			}
			return null;
		}
	}
}
