using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.CampaignSystem.Party;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002D8 RID: 728
	public class DestroyMobilePartyLogEntry : LogEntry
	{
		// Token: 0x06002AC7 RID: 10951 RVA: 0x000B617B File Offset: 0x000B437B
		internal static void AutoGeneratedStaticCollectObjectsDestroyMobilePartyLogEntry(object o, List<object> collectedObjects)
		{
			((DestroyMobilePartyLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002AC8 RID: 10952 RVA: 0x000B618C File Offset: 0x000B438C
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.Hero);
			collectedObjects.Add(this.Faction);
			collectedObjects.Add(this.DestroyerPartyFaction);
			collectedObjects.Add(this.DestroyerHero);
			collectedObjects.Add(this._destroyerPartyName);
		}

		// Token: 0x06002AC9 RID: 10953 RVA: 0x000B61DC File Offset: 0x000B43DC
		internal static object AutoGeneratedGetMemberValueHero(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).Hero;
		}

		// Token: 0x06002ACA RID: 10954 RVA: 0x000B61E9 File Offset: 0x000B43E9
		internal static object AutoGeneratedGetMemberValueFaction(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).Faction;
		}

		// Token: 0x06002ACB RID: 10955 RVA: 0x000B61F6 File Offset: 0x000B43F6
		internal static object AutoGeneratedGetMemberValueDestroyerPartyFaction(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).DestroyerPartyFaction;
		}

		// Token: 0x06002ACC RID: 10956 RVA: 0x000B6203 File Offset: 0x000B4403
		internal static object AutoGeneratedGetMemberValueDestroyerHero(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).DestroyerHero;
		}

		// Token: 0x06002ACD RID: 10957 RVA: 0x000B6210 File Offset: 0x000B4410
		internal static object AutoGeneratedGetMemberValue_destroyerPartyName(object o)
		{
			return ((DestroyMobilePartyLogEntry)o)._destroyerPartyName;
		}

		// Token: 0x06002ACE RID: 10958 RVA: 0x000B6220 File Offset: 0x000B4420
		public DestroyMobilePartyLogEntry(MobileParty mobileParty, PartyBase destroyerParty)
		{
			this.Hero = mobileParty.LeaderHero;
			this.Faction = mobileParty.MapFaction;
			this._destroyerPartyName = ((destroyerParty != null) ? destroyerParty.Name : null);
			this.DestroyerPartyFaction = ((destroyerParty != null) ? destroyerParty.MapFaction : null);
			this.DestroyerHero = ((destroyerParty != null) ? destroyerParty.LeaderHero : null);
		}

		// Token: 0x06002ACF RID: 10959 RVA: 0x000B6284 File Offset: 0x000B4484
		public override int GetAsRumor(Settlement settlement, ref TextObject comment)
		{
			int result = 0;
			if (this.DestroyerPartyFaction == settlement.MapFaction && this.DestroyerHero != null && this.Hero != null)
			{
				comment = new TextObject("{=shihxzUN}Praise be... {LORD.LINK} met {OTHER_SIDE} and whipped them soundly. Maybe now there will be an end to this war.", null);
				StringHelpers.SetCharacterProperties("LORD", this.DestroyerHero.CharacterObject, comment, false);
				comment.SetTextVariable("OTHER_SIDE", FactionHelper.GetTermUsedByOtherFaction(this.Faction, settlement.MapFaction, false));
				return 4;
			}
			if (this.Faction == settlement.MapFaction && this.DestroyerHero != null && this.Hero != null)
			{
				comment = new TextObject("{=O4dWdKZd}Ach... So they say {LORD.LINK} got {?LORD.GENDER}his{?}her{\\?} arse handed to {?LORD.GENDER}him{?}her{\\?} by {OTHER_SIDE}. Grim times, friend.", null);
				StringHelpers.SetCharacterProperties("LORD", this.Hero.CharacterObject, comment, false);
				comment.SetTextVariable("OTHER_SIDE", FactionHelper.GetTermUsedByOtherFaction(this.DestroyerPartyFaction, settlement.MapFaction, false));
				return 4;
			}
			return result;
		}

		// Token: 0x06002AD0 RID: 10960 RVA: 0x000B6360 File Offset: 0x000B4560
		public override string ToString()
		{
			TextObject textObject = TextObject.Empty;
			if (this.Hero != null && this._destroyerPartyName != null)
			{
				textObject = new TextObject("{=i90Cmb5e}Party of {HERO.NAME} is destroyed by {DESTROYER_PARTY}", null);
				StringHelpers.SetCharacterProperties("HERO", this.Hero.CharacterObject, textObject, false);
				textObject.SetTextVariable("DESTROYER_PARTY", this._destroyerPartyName);
			}
			return textObject.ToString();
		}

		// Token: 0x04000CD3 RID: 3283
		[SaveableField(210)]
		public readonly Hero Hero;

		// Token: 0x04000CD4 RID: 3284
		[SaveableField(211)]
		public readonly IFaction Faction;

		// Token: 0x04000CD5 RID: 3285
		[SaveableField(212)]
		public readonly IFaction DestroyerPartyFaction;

		// Token: 0x04000CD6 RID: 3286
		[SaveableField(213)]
		public readonly Hero DestroyerHero;

		// Token: 0x04000CD7 RID: 3287
		[SaveableField(214)]
		private readonly TextObject _destroyerPartyName;
	}
}
