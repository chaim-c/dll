using System;
using System.Collections.Generic;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002E2 RID: 738
	public class RebellionStartedLogEntry : LogEntry, IChatNotification
	{
		// Token: 0x06002B3C RID: 11068 RVA: 0x000B78AA File Offset: 0x000B5AAA
		internal static void AutoGeneratedStaticCollectObjectsRebellionStartedLogEntry(object o, List<object> collectedObjects)
		{
			((RebellionStartedLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002B3D RID: 11069 RVA: 0x000B78B8 File Offset: 0x000B5AB8
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.Settlement);
		}

		// Token: 0x06002B3E RID: 11070 RVA: 0x000B78CD File Offset: 0x000B5ACD
		internal static object AutoGeneratedGetMemberValueSettlement(object o)
		{
			return ((RebellionStartedLogEntry)o).Settlement;
		}

		// Token: 0x06002B3F RID: 11071 RVA: 0x000B78DA File Offset: 0x000B5ADA
		internal static object AutoGeneratedGetMemberValue_isVisibleNotification(object o)
		{
			return ((RebellionStartedLogEntry)o)._isVisibleNotification;
		}

		// Token: 0x17000AA1 RID: 2721
		// (get) Token: 0x06002B40 RID: 11072 RVA: 0x000B78EC File Offset: 0x000B5AEC
		public bool IsVisibleNotification
		{
			get
			{
				return this._isVisibleNotification;
			}
		}

		// Token: 0x17000AA2 RID: 2722
		// (get) Token: 0x06002B41 RID: 11073 RVA: 0x000B78F4 File Offset: 0x000B5AF4
		public override ChatNotificationType NotificationType
		{
			get
			{
				return base.MilitaryNotification(null, this.Settlement.OwnerClan);
			}
		}

		// Token: 0x06002B42 RID: 11074 RVA: 0x000B7908 File Offset: 0x000B5B08
		public RebellionStartedLogEntry(Settlement settlement, Clan oldOwnerCLan)
		{
			this.Settlement = settlement;
			this._isVisibleNotification = (oldOwnerCLan == Clan.PlayerClan || (oldOwnerCLan.Kingdom != null && oldOwnerCLan.Kingdom == Clan.PlayerClan.Kingdom));
		}

		// Token: 0x06002B43 RID: 11075 RVA: 0x000B7945 File Offset: 0x000B5B45
		public override string ToString()
		{
			return this.GetNotificationText().ToString();
		}

		// Token: 0x06002B44 RID: 11076 RVA: 0x000B7952 File Offset: 0x000B5B52
		public TextObject GetNotificationText()
		{
			TextObject textObject = new TextObject("{=fbsFZWhb}Rebels in {SETTLEMENT} have taken the ownership of the settlement.", null);
			textObject.SetTextVariable("SETTLEMENT", this.Settlement.Name);
			return textObject;
		}

		// Token: 0x04000CF7 RID: 3319
		[SaveableField(310)]
		public readonly Settlement Settlement;

		// Token: 0x04000CF8 RID: 3320
		[SaveableField(311)]
		private readonly bool _isVisibleNotification;
	}
}
