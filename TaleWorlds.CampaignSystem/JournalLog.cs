using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000063 RID: 99
	public class JournalLog
	{
		// Token: 0x06000D92 RID: 3474 RVA: 0x000437EE File Offset: 0x000419EE
		internal static void AutoGeneratedStaticCollectObjectsJournalLog(object o, List<object> collectedObjects)
		{
			((JournalLog)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000D93 RID: 3475 RVA: 0x000437FC File Offset: 0x000419FC
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.LogTime, collectedObjects);
			collectedObjects.Add(this.LogText);
			collectedObjects.Add(this.TaskName);
		}

		// Token: 0x06000D94 RID: 3476 RVA: 0x00043827 File Offset: 0x00041A27
		internal static object AutoGeneratedGetMemberValueCurrentProgress(object o)
		{
			return ((JournalLog)o).CurrentProgress;
		}

		// Token: 0x06000D95 RID: 3477 RVA: 0x00043839 File Offset: 0x00041A39
		internal static object AutoGeneratedGetMemberValueLogTime(object o)
		{
			return ((JournalLog)o).LogTime;
		}

		// Token: 0x06000D96 RID: 3478 RVA: 0x0004384B File Offset: 0x00041A4B
		internal static object AutoGeneratedGetMemberValueLogText(object o)
		{
			return ((JournalLog)o).LogText;
		}

		// Token: 0x06000D97 RID: 3479 RVA: 0x00043858 File Offset: 0x00041A58
		internal static object AutoGeneratedGetMemberValueTaskName(object o)
		{
			return ((JournalLog)o).TaskName;
		}

		// Token: 0x06000D98 RID: 3480 RVA: 0x00043865 File Offset: 0x00041A65
		internal static object AutoGeneratedGetMemberValueRange(object o)
		{
			return ((JournalLog)o).Range;
		}

		// Token: 0x06000D99 RID: 3481 RVA: 0x00043877 File Offset: 0x00041A77
		internal static object AutoGeneratedGetMemberValueType(object o)
		{
			return ((JournalLog)o).Type;
		}

		// Token: 0x17000356 RID: 854
		// (get) Token: 0x06000D9A RID: 3482 RVA: 0x00043889 File Offset: 0x00041A89
		// (set) Token: 0x06000D9B RID: 3483 RVA: 0x00043891 File Offset: 0x00041A91
		[SaveableProperty(3)]
		public int CurrentProgress { get; private set; }

		// Token: 0x06000D9C RID: 3484 RVA: 0x0004389A File Offset: 0x00041A9A
		public JournalLog(CampaignTime logTime, TextObject logText, TextObject taskName = null, int currentProgress = 0, int range = 0, LogType type = LogType.Text)
		{
			this.LogTime = logTime;
			this.LogText = logText;
			this.TaskName = taskName;
			this.CurrentProgress = currentProgress;
			this.Range = range;
			this.Type = type;
		}

		// Token: 0x06000D9D RID: 3485 RVA: 0x000438CF File Offset: 0x00041ACF
		public void UpdateCurrentProgress(int progress)
		{
			this.CurrentProgress = progress;
		}

		// Token: 0x06000D9E RID: 3486 RVA: 0x000438D8 File Offset: 0x00041AD8
		public bool HasBeenCompleted()
		{
			return this.CurrentProgress >= this.Range;
		}

		// Token: 0x06000D9F RID: 3487 RVA: 0x000438EC File Offset: 0x00041AEC
		public TextObject GetTimeText()
		{
			int num = MathF.Ceiling(CampaignTime.Now.ToDays) - MathF.Ceiling(this.LogTime.ToDays);
			TextObject textObject;
			if (num != 0)
			{
				if (num != 1)
				{
					textObject = GameTexts.FindText("str_DAY_days_ago", null);
					textObject.SetTextVariable("DAY", num);
				}
				else
				{
					textObject = GameTexts.FindText("str_yesterday", null);
				}
			}
			else
			{
				textObject = GameTexts.FindText("str_today", null);
			}
			return textObject;
		}

		// Token: 0x040003E2 RID: 994
		[SaveableField(0)]
		public readonly CampaignTime LogTime;

		// Token: 0x040003E3 RID: 995
		[SaveableField(1)]
		public readonly TextObject LogText;

		// Token: 0x040003E4 RID: 996
		[SaveableField(2)]
		public readonly TextObject TaskName;

		// Token: 0x040003E6 RID: 998
		[SaveableField(4)]
		public readonly int Range;

		// Token: 0x040003E7 RID: 999
		[SaveableField(5)]
		public readonly LogType Type;
	}
}
