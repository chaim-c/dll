using System;
using System.Collections.Generic;
using TaleWorlds.CampaignSystem.Roster;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Party.PartyComponents
{
	// Token: 0x020002B4 RID: 692
	public class CustomPartyComponent : PartyComponent
	{
		// Token: 0x0600282B RID: 10283 RVA: 0x000AB61A File Offset: 0x000A981A
		internal static void AutoGeneratedStaticCollectObjectsCustomPartyComponent(object o, List<object> collectedObjects)
		{
			((CustomPartyComponent)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x0600282C RID: 10284 RVA: 0x000AB628 File Offset: 0x000A9828
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this._name);
			collectedObjects.Add(this._homeSettlement);
			collectedObjects.Add(this._owner);
		}

		// Token: 0x0600282D RID: 10285 RVA: 0x000AB655 File Offset: 0x000A9855
		internal static object AutoGeneratedGetMemberValue_avoidHostileActions(object o)
		{
			return ((CustomPartyComponent)o)._avoidHostileActions;
		}

		// Token: 0x0600282E RID: 10286 RVA: 0x000AB667 File Offset: 0x000A9867
		internal static object AutoGeneratedGetMemberValue_name(object o)
		{
			return ((CustomPartyComponent)o)._name;
		}

		// Token: 0x0600282F RID: 10287 RVA: 0x000AB674 File Offset: 0x000A9874
		internal static object AutoGeneratedGetMemberValue_homeSettlement(object o)
		{
			return ((CustomPartyComponent)o)._homeSettlement;
		}

		// Token: 0x06002830 RID: 10288 RVA: 0x000AB681 File Offset: 0x000A9881
		internal static object AutoGeneratedGetMemberValue_owner(object o)
		{
			return ((CustomPartyComponent)o)._owner;
		}

		// Token: 0x06002831 RID: 10289 RVA: 0x000AB68E File Offset: 0x000A988E
		internal static object AutoGeneratedGetMemberValue_customPartyBaseSpeed(object o)
		{
			return ((CustomPartyComponent)o)._customPartyBaseSpeed;
		}

		// Token: 0x06002832 RID: 10290 RVA: 0x000AB6A0 File Offset: 0x000A98A0
		internal static object AutoGeneratedGetMemberValue_partyMountStringId(object o)
		{
			return ((CustomPartyComponent)o)._partyMountStringId;
		}

		// Token: 0x06002833 RID: 10291 RVA: 0x000AB6AD File Offset: 0x000A98AD
		internal static object AutoGeneratedGetMemberValue_partyHarnessStringId(object o)
		{
			return ((CustomPartyComponent)o)._partyHarnessStringId;
		}

		// Token: 0x17000A1B RID: 2587
		// (get) Token: 0x06002834 RID: 10292 RVA: 0x000AB6BA File Offset: 0x000A98BA
		// (set) Token: 0x06002835 RID: 10293 RVA: 0x000AB6C2 File Offset: 0x000A98C2
		public float CustomPartyBaseSpeed
		{
			get
			{
				return this._customPartyBaseSpeed;
			}
			set
			{
				this._customPartyBaseSpeed = value;
			}
		}

		// Token: 0x17000A1C RID: 2588
		// (get) Token: 0x06002836 RID: 10294 RVA: 0x000AB6CB File Offset: 0x000A98CB
		public override bool AvoidHostileActions
		{
			get
			{
				return this._avoidHostileActions;
			}
		}

		// Token: 0x17000A1D RID: 2589
		// (get) Token: 0x06002837 RID: 10295 RVA: 0x000AB6D3 File Offset: 0x000A98D3
		public float BaseSpeed
		{
			get
			{
				return this._customPartyBaseSpeed;
			}
		}

		// Token: 0x17000A1E RID: 2590
		// (get) Token: 0x06002838 RID: 10296 RVA: 0x000AB6DB File Offset: 0x000A98DB
		public override Hero PartyOwner
		{
			get
			{
				return this._owner;
			}
		}

		// Token: 0x17000A1F RID: 2591
		// (get) Token: 0x06002839 RID: 10297 RVA: 0x000AB6E3 File Offset: 0x000A98E3
		public override TextObject Name
		{
			get
			{
				return this._name;
			}
		}

		// Token: 0x17000A20 RID: 2592
		// (get) Token: 0x0600283A RID: 10298 RVA: 0x000AB6EB File Offset: 0x000A98EB
		public override Settlement HomeSettlement
		{
			get
			{
				return this._homeSettlement;
			}
		}

		// Token: 0x0600283B RID: 10299 RVA: 0x000AB6F4 File Offset: 0x000A98F4
		public static MobileParty CreateQuestParty(Vec2 position, float spawnRadius, Settlement homeSettlement, TextObject name, Clan clan, PartyTemplateObject partyTemplate, Hero owner, int troopLimit = 0, string partyMountStringId = "", string partyHarnessStringId = "", float customPartyBaseSpeed = 0f, bool avoidHostileActions = false)
		{
			return MobileParty.CreateParty("quest_party_template_1", new CustomPartyComponent(), delegate(MobileParty mobileParty)
			{
				(mobileParty.PartyComponent as CustomPartyComponent).InitializeQuestPartyProperties(mobileParty, position, spawnRadius, homeSettlement, name, partyTemplate, owner, troopLimit, partyMountStringId, partyHarnessStringId, customPartyBaseSpeed, avoidHostileActions);
				mobileParty.ActualClan = clan;
			});
		}

		// Token: 0x0600283C RID: 10300 RVA: 0x000AB780 File Offset: 0x000A9980
		public static MobileParty CreateQuestParty(Vec2 position, float spawnRadius, Settlement homeSettlement, TextObject name, Clan clan, TroopRoster troopRoster, TroopRoster prisonerRoster, Hero owner, string partyMountStringId = "", string partyHarnessStringId = "", float customPartyBaseSpeed = 0f, bool avoidHostileActions = false)
		{
			return MobileParty.CreateParty("quest_party_template_1", new CustomPartyComponent(), delegate(MobileParty mobileParty)
			{
				(mobileParty.PartyComponent as CustomPartyComponent).InitializeQuestPartyProperties(mobileParty, position, spawnRadius, homeSettlement, name, troopRoster, prisonerRoster, owner, partyMountStringId, partyHarnessStringId, customPartyBaseSpeed, avoidHostileActions);
				mobileParty.ActualClan = clan;
			});
		}

		// Token: 0x0600283D RID: 10301 RVA: 0x000AB80C File Offset: 0x000A9A0C
		private void InitializeQuestPartyProperties(MobileParty mobileParty, Vec2 position, float spawnRadius, Settlement homeSettlement, TextObject name, PartyTemplateObject partyTemplate, Hero owner, int troopLimit, string partyMountStringId, string partyHarnessStringId, float customPartyBaseSpeed, bool avoidHostileActions)
		{
			this._name = name;
			this._homeSettlement = homeSettlement;
			this._owner = owner;
			mobileParty.InitializeMobilePartyAroundPosition(partyTemplate, position, spawnRadius, 0f, troopLimit);
			mobileParty.Party.SetVisualAsDirty();
			this._partyMountStringId = partyMountStringId;
			this._partyHarnessStringId = partyHarnessStringId;
			this.SetBaseSpeed(customPartyBaseSpeed);
			this._avoidHostileActions = avoidHostileActions;
		}

		// Token: 0x0600283E RID: 10302 RVA: 0x000AB870 File Offset: 0x000A9A70
		private void InitializeQuestPartyProperties(MobileParty mobileParty, Vec2 position, float spawnRadius, Settlement homeSettlement, TextObject name, TroopRoster troopRoster, TroopRoster prisonerRoster, Hero owner, string partyMountStringId, string partyHarnessStringId, float customPartyBaseSpeed, bool avoidHostileActions)
		{
			this._name = name;
			this._homeSettlement = homeSettlement;
			this._owner = owner;
			mobileParty.InitializeMobilePartyAroundPosition(troopRoster, prisonerRoster, position, spawnRadius, 0f);
			mobileParty.Party.SetVisualAsDirty();
			this._partyMountStringId = partyMountStringId;
			this._partyHarnessStringId = partyHarnessStringId;
			this.SetBaseSpeed(customPartyBaseSpeed);
			this._avoidHostileActions = avoidHostileActions;
		}

		// Token: 0x0600283F RID: 10303 RVA: 0x000AB8D1 File Offset: 0x000A9AD1
		public void SetBaseSpeed(float speed)
		{
			this._customPartyBaseSpeed = speed;
			MobileParty mobileParty = base.MobileParty;
			if (mobileParty == null)
			{
				return;
			}
			mobileParty.UpdateVersionNo();
		}

		// Token: 0x06002840 RID: 10304 RVA: 0x000AB8EA File Offset: 0x000A9AEA
		public override void GetMountAndHarnessVisualIdsForPartyIcon(PartyBase party, out string mountStringId, out string harnessStringId)
		{
			mountStringId = this._partyMountStringId;
			harnessStringId = this._partyHarnessStringId;
		}

		// Token: 0x04000C37 RID: 3127
		private const string StringId = "quest_party_template_1";

		// Token: 0x04000C38 RID: 3128
		[SaveableField(10)]
		private TextObject _name;

		// Token: 0x04000C39 RID: 3129
		[SaveableField(20)]
		private Settlement _homeSettlement;

		// Token: 0x04000C3A RID: 3130
		[SaveableField(30)]
		private Hero _owner;

		// Token: 0x04000C3B RID: 3131
		[SaveableField(40)]
		private float _customPartyBaseSpeed;

		// Token: 0x04000C3C RID: 3132
		[SaveableField(50)]
		private string _partyMountStringId;

		// Token: 0x04000C3D RID: 3133
		[SaveableField(60)]
		private string _partyHarnessStringId;

		// Token: 0x04000C3E RID: 3134
		[SaveableField(70)]
		public bool _avoidHostileActions;
	}
}
