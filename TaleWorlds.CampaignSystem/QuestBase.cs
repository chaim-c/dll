using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.CampaignSystem.Actions;
using TaleWorlds.CampaignSystem.GameMenus;
using TaleWorlds.CampaignSystem.Overlay;
using TaleWorlds.CampaignSystem.Settlements.Locations;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.ObjectSystem;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000062 RID: 98
	public abstract class QuestBase : MBObjectBase
	{
		// Token: 0x06000D42 RID: 3394 RVA: 0x00042FEA File Offset: 0x000411EA
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this._taskList);
			collectedObjects.Add(this._journalEntries);
			collectedObjects.Add(this._questGiver);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.QuestDueTime, collectedObjects);
		}

		// Token: 0x06000D43 RID: 3395 RVA: 0x00043028 File Offset: 0x00041228
		internal static object AutoGeneratedGetMemberValueQuestDueTime(object o)
		{
			return ((QuestBase)o).QuestDueTime;
		}

		// Token: 0x06000D44 RID: 3396 RVA: 0x0004303A File Offset: 0x0004123A
		internal static object AutoGeneratedGetMemberValueIsTrackEnabled(object o)
		{
			return ((QuestBase)o).IsTrackEnabled;
		}

		// Token: 0x06000D45 RID: 3397 RVA: 0x0004304C File Offset: 0x0004124C
		internal static object AutoGeneratedGetMemberValueRewardGold(object o)
		{
			return ((QuestBase)o).RewardGold;
		}

		// Token: 0x06000D46 RID: 3398 RVA: 0x0004305E File Offset: 0x0004125E
		internal static object AutoGeneratedGetMemberValue_questState(object o)
		{
			return ((QuestBase)o)._questState;
		}

		// Token: 0x06000D47 RID: 3399 RVA: 0x00043070 File Offset: 0x00041270
		internal static object AutoGeneratedGetMemberValue_taskList(object o)
		{
			return ((QuestBase)o)._taskList;
		}

		// Token: 0x06000D48 RID: 3400 RVA: 0x0004307D File Offset: 0x0004127D
		internal static object AutoGeneratedGetMemberValue_journalEntries(object o)
		{
			return ((QuestBase)o)._journalEntries;
		}

		// Token: 0x06000D49 RID: 3401 RVA: 0x0004308A File Offset: 0x0004128A
		internal static object AutoGeneratedGetMemberValue_questGiver(object o)
		{
			return ((QuestBase)o)._questGiver;
		}

		// Token: 0x17000348 RID: 840
		// (get) Token: 0x06000D4A RID: 3402 RVA: 0x00043097 File Offset: 0x00041297
		// (set) Token: 0x06000D4B RID: 3403 RVA: 0x0004309F File Offset: 0x0004129F
		[SaveableProperty(101)]
		public CampaignTime QuestDueTime { get; protected set; }

		// Token: 0x17000349 RID: 841
		// (get) Token: 0x06000D4C RID: 3404 RVA: 0x000430A8 File Offset: 0x000412A8
		public MBReadOnlyList<QuestTaskBase> TaskList
		{
			get
			{
				return this._taskList;
			}
		}

		// Token: 0x1700034A RID: 842
		// (get) Token: 0x06000D4D RID: 3405 RVA: 0x000430B0 File Offset: 0x000412B0
		public MBReadOnlyList<JournalLog> JournalEntries
		{
			get
			{
				return this._journalEntries;
			}
		}

		// Token: 0x1700034B RID: 843
		// (get) Token: 0x06000D4E RID: 3406 RVA: 0x000430B8 File Offset: 0x000412B8
		// (set) Token: 0x06000D4F RID: 3407 RVA: 0x000430C0 File Offset: 0x000412C0
		[SaveableProperty(104)]
		public bool IsTrackEnabled { get; private set; }

		// Token: 0x1700034C RID: 844
		// (get) Token: 0x06000D50 RID: 3408 RVA: 0x000430C9 File Offset: 0x000412C9
		public bool IsOngoing
		{
			get
			{
				return this._questState == QuestBase.QuestStates.Ongoing;
			}
		}

		// Token: 0x1700034D RID: 845
		// (get) Token: 0x06000D51 RID: 3409 RVA: 0x000430D4 File Offset: 0x000412D4
		public bool IsFinalized
		{
			get
			{
				return this._questState == QuestBase.QuestStates.Finalized;
			}
		}

		// Token: 0x1700034E RID: 846
		// (get) Token: 0x06000D52 RID: 3410 RVA: 0x000430DF File Offset: 0x000412DF
		public bool IsThereDiscussDialogFlow
		{
			get
			{
				return this.DiscussDialogFlow != null;
			}
		}

		// Token: 0x1700034F RID: 847
		// (get) Token: 0x06000D53 RID: 3411 RVA: 0x000430EA File Offset: 0x000412EA
		// (set) Token: 0x06000D54 RID: 3412 RVA: 0x000430F2 File Offset: 0x000412F2
		public Hero QuestGiver
		{
			get
			{
				return this._questGiver;
			}
			private set
			{
				this._questGiver = value;
			}
		}

		// Token: 0x17000350 RID: 848
		// (get) Token: 0x06000D55 RID: 3413
		public abstract TextObject Title { get; }

		// Token: 0x17000351 RID: 849
		// (get) Token: 0x06000D56 RID: 3414
		public abstract bool IsRemainingTimeHidden { get; }

		// Token: 0x17000352 RID: 850
		// (get) Token: 0x06000D57 RID: 3415 RVA: 0x000430FB File Offset: 0x000412FB
		// (set) Token: 0x06000D58 RID: 3416 RVA: 0x00043103 File Offset: 0x00041303
		public virtual int RelationshipChangeWithQuestGiver { get; protected set; }

		// Token: 0x17000353 RID: 851
		// (get) Token: 0x06000D59 RID: 3417 RVA: 0x0004310C File Offset: 0x0004130C
		public virtual bool IsSpecialQuest
		{
			get
			{
				return false;
			}
		}

		// Token: 0x06000D5A RID: 3418
		protected abstract void SetDialogs();

		// Token: 0x06000D5B RID: 3419 RVA: 0x0004310F File Offset: 0x0004130F
		protected QuestBase(string questId, Hero questGiver, CampaignTime duration, int rewardGold) : base(questId)
		{
			this.QuestGiver = questGiver;
			this.QuestDueTime = duration;
			this.IsTrackEnabled = true;
			this.RewardGold = rewardGold;
			this._taskList = new MBList<QuestTaskBase>();
			this._journalEntries = new MBList<JournalLog>();
		}

		// Token: 0x06000D5C RID: 3420 RVA: 0x0004314C File Offset: 0x0004134C
		public void StartQuest()
		{
			this._questState = QuestBase.QuestStates.Ongoing;
			this.OnStartQuest();
			this.RegisterEvents();
			MapEventHelper.OnConversationEnd();
			if (this.QuestGiver != null && !Campaign.Current.QuestManager.TrackedObjects.ContainsKey(this.QuestGiver))
			{
				Campaign.Current.QuestManager.AddTrackedObjectForQuest(this.QuestGiver, this);
			}
			CampaignEventDispatcher.Instance.OnQuestStarted(this);
		}

		// Token: 0x06000D5D RID: 3421 RVA: 0x000431B6 File Offset: 0x000413B6
		public void CompleteQuestWithSuccess()
		{
			this.OnCompleteWithSuccess();
			this.FinalizeQuest();
			CampaignEventDispatcher.Instance.OnQuestCompleted(this, QuestBase.QuestCompleteDetails.Success);
			this.AfterFinalize();
		}

		// Token: 0x06000D5E RID: 3422 RVA: 0x000431D8 File Offset: 0x000413D8
		public void CompleteQuestWithTimeOut(TextObject timeOutLog = null)
		{
			bool flag = false;
			bool flag2 = false;
			this.OnBeforeTimedOut(ref flag, ref flag2);
			if (!flag2)
			{
				if (!flag)
				{
					if (timeOutLog != null)
					{
						this.AddLog(timeOutLog, false);
					}
					this.OnTimedOut();
					this.FinalizeQuest();
					CampaignEventDispatcher.Instance.OnQuestCompleted(this, QuestBase.QuestCompleteDetails.Timeout);
					this.AfterFinalize();
					return;
				}
				this.CompleteQuestWithSuccess();
			}
		}

		// Token: 0x06000D5F RID: 3423 RVA: 0x0004322A File Offset: 0x0004142A
		public void CompleteQuestWithFail(TextObject cancelLog = null)
		{
			if (cancelLog != null)
			{
				this.AddLog(cancelLog, false);
			}
			this.OnFailed();
			this.FinalizeQuest();
			CampaignEventDispatcher.Instance.OnQuestCompleted(this, QuestBase.QuestCompleteDetails.Fail);
			this.AfterFinalize();
		}

		// Token: 0x06000D60 RID: 3424 RVA: 0x00043256 File Offset: 0x00041456
		public void CompleteQuestWithBetrayal(TextObject betrayLog = null)
		{
			if (betrayLog != null)
			{
				this.AddLog(betrayLog, false);
			}
			this.OnBetrayal();
			this.FinalizeQuest();
			CampaignEventDispatcher.Instance.OnQuestCompleted(this, QuestBase.QuestCompleteDetails.FailWithBetrayal);
			this.AfterFinalize();
		}

		// Token: 0x06000D61 RID: 3425 RVA: 0x00043282 File Offset: 0x00041482
		public void CompleteQuestWithCancel(TextObject cancelLog = null)
		{
			if (cancelLog != null)
			{
				this.AddLog(cancelLog, false);
			}
			this.OnCanceled();
			this.FinalizeQuest();
			CampaignEventDispatcher.Instance.OnQuestCompleted(this, QuestBase.QuestCompleteDetails.Cancel);
			this.AfterFinalize();
		}

		// Token: 0x06000D62 RID: 3426 RVA: 0x000432B0 File Offset: 0x000414B0
		private void FinalizeQuest()
		{
			foreach (QuestTaskBase questTaskBase in this._taskList)
			{
				if (questTaskBase.IsActive)
				{
					questTaskBase.Finish(QuestTaskBase.FinishStates.Cancel);
				}
			}
			this._questState = QuestBase.QuestStates.Finalized;
			this.OnFinalize();
			this.ClearRelatedFields();
			this.OfferDialogFlow = null;
			this.DiscussDialogFlow = null;
			this.QuestCharacterDialogFlow = null;
			Campaign.Current.QuestManager.OnQuestFinalized(this);
		}

		// Token: 0x06000D63 RID: 3427 RVA: 0x00043344 File Offset: 0x00041544
		private void AfterFinalize()
		{
			this.RemoveAllTrackedObjects();
		}

		// Token: 0x06000D64 RID: 3428 RVA: 0x0004334C File Offset: 0x0004154C
		protected void InitializeQuestOnCreation()
		{
			this.AddDialogs();
		}

		// Token: 0x06000D65 RID: 3429 RVA: 0x00043354 File Offset: 0x00041554
		public void InitializeQuestOnLoadWithQuestManager()
		{
			this.RegisterEvents();
			this.InitializeQuestOnGameLoad();
			this.AddDialogs();
		}

		// Token: 0x06000D66 RID: 3430 RVA: 0x00043368 File Offset: 0x00041568
		internal void HourlyTickWithQuestManager()
		{
			this.HourlyTick();
		}

		// Token: 0x06000D67 RID: 3431 RVA: 0x00043370 File Offset: 0x00041570
		protected void AddTask(QuestTaskBase task)
		{
			this._taskList.Add(task);
			task.SetReferences();
		}

		// Token: 0x17000354 RID: 852
		// (get) Token: 0x06000D68 RID: 3432 RVA: 0x00043384 File Offset: 0x00041584
		protected virtual TextObject TargetHeroDisappearedLogText
		{
			get
			{
				return new TextObject("{=ZfRmHMJJ}{QUEST_TARGET.LINK} has lost the struggle against {?QUEST_TARGET.GENDER}her{?}his{\\?} rivals and decided to left the realm. Your agreement with {QUEST_GIVER.LINK} has been canceled and your service is no longer needed to solve the issue.", null);
			}
		}

		// Token: 0x17000355 RID: 853
		// (get) Token: 0x06000D69 RID: 3433 RVA: 0x00043391 File Offset: 0x00041591
		protected virtual TextObject TargetHeroDiedLogText
		{
			get
			{
				return new TextObject("{=WKIqnKtu}{QUEST_TARGET.LINK} has died and your agreement with {QUEST_GIVER.LINK} has been canceled. Your service is no longer needed to solve the issue.", null);
			}
		}

		// Token: 0x06000D6A RID: 3434 RVA: 0x000433A0 File Offset: 0x000415A0
		public JournalLog AddLog(TextObject text, bool hideInformation = false)
		{
			JournalLog journalLog = new JournalLog(CampaignTime.Now, text, null, 0, 0, LogType.Text);
			this._journalEntries.Add(journalLog);
			CampaignEventDispatcher.Instance.OnQuestLogAdded(this, hideInformation);
			return journalLog;
		}

		// Token: 0x06000D6B RID: 3435 RVA: 0x000433D8 File Offset: 0x000415D8
		public JournalLog AddDiscreteLog(TextObject text, TextObject taskName, int currentProgress, int targetProgress, TextObject shortText = null, bool hideInformation = false)
		{
			JournalLog journalLog = new JournalLog(CampaignTime.Now, text, taskName, currentProgress, targetProgress, LogType.Discreate);
			this._journalEntries.Add(journalLog);
			CampaignEventDispatcher.Instance.OnQuestLogAdded(this, hideInformation);
			return journalLog;
		}

		// Token: 0x06000D6C RID: 3436 RVA: 0x00043410 File Offset: 0x00041610
		public JournalLog AddTwoWayContinuousLog(TextObject text, TextObject taskName, int currentProgress, int range, bool hideInformation = false)
		{
			JournalLog journalLog = new JournalLog(CampaignTime.Now, text, taskName, currentProgress, range, LogType.TwoWayContinuous);
			this._journalEntries.Add(journalLog);
			CampaignEventDispatcher.Instance.OnQuestLogAdded(this, hideInformation);
			return journalLog;
		}

		// Token: 0x06000D6D RID: 3437 RVA: 0x00043448 File Offset: 0x00041648
		protected void RemoveLog(JournalLog logToRemove)
		{
			if (this._journalEntries.Contains(logToRemove))
			{
				this._journalEntries.Remove(logToRemove);
				return;
			}
			Debug.FailedAssert("Quest log requested to be removed cant be found.", "C:\\Develop\\MB3\\Source\\Bannerlord\\TaleWorlds.CampaignSystem\\QuestBase.cs", "RemoveLog", 276);
		}

		// Token: 0x06000D6E RID: 3438 RVA: 0x00043480 File Offset: 0x00041680
		protected void UpdateQuestTaskStage(JournalLog questLog, int currentProgress)
		{
			foreach (JournalLog journalLog in this._journalEntries)
			{
				if (journalLog == questLog)
				{
					journalLog.UpdateCurrentProgress(currentProgress);
				}
			}
		}

		// Token: 0x06000D6F RID: 3439 RVA: 0x000434D8 File Offset: 0x000416D8
		public virtual GameMenuOption.IssueQuestFlags IsLocationTrackedByQuest(Location location)
		{
			return GameMenuOption.IssueQuestFlags.None;
		}

		// Token: 0x06000D70 RID: 3440 RVA: 0x000434DB File Offset: 0x000416DB
		public virtual int GetCurrentProgress()
		{
			return -1;
		}

		// Token: 0x06000D71 RID: 3441 RVA: 0x000434DE File Offset: 0x000416DE
		public virtual int GetMaxProgress()
		{
			return 1;
		}

		// Token: 0x06000D72 RID: 3442 RVA: 0x000434E1 File Offset: 0x000416E1
		public override string ToString()
		{
			return base.StringId;
		}

		// Token: 0x06000D73 RID: 3443 RVA: 0x000434E9 File Offset: 0x000416E9
		public virtual string GetPrefabName()
		{
			return "bd_target_board_2";
		}

		// Token: 0x06000D74 RID: 3444 RVA: 0x000434F0 File Offset: 0x000416F0
		private void AddDialogs()
		{
			if (this.OfferDialogFlow != null)
			{
				Campaign.Current.ConversationManager.AddDialogFlow(this.OfferDialogFlow, this);
			}
			if (this.DiscussDialogFlow != null)
			{
				Campaign.Current.ConversationManager.AddDialogFlow(this.DiscussDialogFlow, this);
			}
			if (this.QuestCharacterDialogFlow != null)
			{
				Campaign.Current.ConversationManager.AddDialogFlow(this.QuestCharacterDialogFlow, this);
			}
		}

		// Token: 0x06000D75 RID: 3445 RVA: 0x00043558 File Offset: 0x00041758
		private void ClearRelatedFields()
		{
			CampaignEventDispatcher.Instance.RemoveListeners(this);
			foreach (QuestTaskBase o in this._taskList)
			{
				CampaignEventDispatcher.Instance.RemoveListeners(o);
			}
			Campaign.Current.ConversationManager.RemoveRelatedLines(this);
			Campaign.Current.GameMenuManager.RemoveRelatedGameMenus(this);
			Campaign.Current.GameMenuManager.RemoveRelatedGameMenuOptions(this);
		}

		// Token: 0x06000D76 RID: 3446 RVA: 0x000435EC File Offset: 0x000417EC
		private void RemoveAllTrackedObjects()
		{
			Campaign.Current.QuestManager.RemoveAllTrackedObjectsForQuest(this);
		}

		// Token: 0x06000D77 RID: 3447 RVA: 0x000435FE File Offset: 0x000417FE
		public void AddTrackedObject(ITrackableCampaignObject trackedObject)
		{
			Campaign.Current.QuestManager.AddTrackedObjectForQuest(trackedObject, this);
			if (this.IsTrackEnabled)
			{
				Campaign.Current.VisualTrackerManager.RegisterObject(trackedObject);
			}
		}

		// Token: 0x06000D78 RID: 3448 RVA: 0x00043629 File Offset: 0x00041829
		public void RemoveTrackedObject(ITrackableCampaignObject trackedObject)
		{
			Campaign.Current.QuestManager.RemoveTrackedObjectForQuest(trackedObject, this);
		}

		// Token: 0x06000D79 RID: 3449 RVA: 0x0004363C File Offset: 0x0004183C
		public bool IsTracked(ITrackableCampaignObject o)
		{
			return Campaign.Current.QuestManager.TrackedObjects.ContainsKey(o) && Campaign.Current.QuestManager.TrackedObjects[o].Contains(this);
		}

		// Token: 0x06000D7A RID: 3450 RVA: 0x00043674 File Offset: 0x00041874
		public void ToggleTrackedObjects()
		{
			this.IsTrackEnabled = !this.IsTrackEnabled;
			List<ITrackableCampaignObject> allTrackedObjectsOfAQuest = Campaign.Current.QuestManager.GetAllTrackedObjectsOfAQuest(this);
			if (this.IsTrackEnabled)
			{
				using (List<ITrackableCampaignObject>.Enumerator enumerator = allTrackedObjectsOfAQuest.GetEnumerator())
				{
					while (enumerator.MoveNext())
					{
						ITrackableCampaignObject obj = enumerator.Current;
						Campaign.Current.VisualTrackerManager.RegisterObject(obj);
					}
					return;
				}
			}
			foreach (ITrackableCampaignObject obj2 in allTrackedObjectsOfAQuest)
			{
				Campaign.Current.VisualTrackerManager.RemoveTrackedObject(obj2, false);
			}
		}

		// Token: 0x06000D7B RID: 3451 RVA: 0x0004373C File Offset: 0x0004193C
		public void AddGameMenu(string menuId, TextObject menuText, OnInitDelegate initDelegate, GameOverlays.MenuOverlayType overlay = GameOverlays.MenuOverlayType.None, GameMenu.MenuFlags menuFlags = GameMenu.MenuFlags.None)
		{
			GameMenu gameMenu = new GameMenu(menuId);
			gameMenu.Initialize(menuText, initDelegate, overlay, menuFlags, this);
			Campaign.Current.GameMenuManager.AddGameMenu(gameMenu);
		}

		// Token: 0x06000D7C RID: 3452 RVA: 0x00043770 File Offset: 0x00041970
		public void AddGameMenuOption(string menuId, string optionId, TextObject optionText, GameMenuOption.OnConditionDelegate condition, GameMenuOption.OnConsequenceDelegate consequence, bool Isleave = false, int index = -1)
		{
			GameMenu gameMenu = Campaign.Current.GameMenuManager.GetGameMenu(menuId);
			if (gameMenu == null)
			{
				throw new KeyNotFoundException();
			}
			gameMenu.AddOption(optionId, optionText, condition, consequence, index, Isleave, false, this);
		}

		// Token: 0x06000D7D RID: 3453 RVA: 0x000437A7 File Offset: 0x000419A7
		public void ChangeQuestDueTime(CampaignTime questDueTime)
		{
			this.QuestDueTime = questDueTime;
		}

		// Token: 0x06000D7E RID: 3454
		protected abstract void InitializeQuestOnGameLoad();

		// Token: 0x06000D7F RID: 3455
		protected abstract void HourlyTick();

		// Token: 0x06000D80 RID: 3456 RVA: 0x000437B0 File Offset: 0x000419B0
		protected virtual void RegisterEvents()
		{
		}

		// Token: 0x06000D81 RID: 3457 RVA: 0x000437B2 File Offset: 0x000419B2
		protected virtual void OnStartQuest()
		{
		}

		// Token: 0x06000D82 RID: 3458 RVA: 0x000437B4 File Offset: 0x000419B4
		protected virtual void OnCompleteWithSuccess()
		{
		}

		// Token: 0x06000D83 RID: 3459 RVA: 0x000437B6 File Offset: 0x000419B6
		protected virtual void OnFinalize()
		{
		}

		// Token: 0x06000D84 RID: 3460 RVA: 0x000437B8 File Offset: 0x000419B8
		public virtual void OnFailed()
		{
		}

		// Token: 0x06000D85 RID: 3461 RVA: 0x000437BA File Offset: 0x000419BA
		protected virtual void OnTimedOut()
		{
		}

		// Token: 0x06000D86 RID: 3462 RVA: 0x000437BC File Offset: 0x000419BC
		protected virtual void OnBeforeTimedOut(ref bool completeWithSuccess, ref bool doNotResolveTheQuest)
		{
		}

		// Token: 0x06000D87 RID: 3463 RVA: 0x000437BE File Offset: 0x000419BE
		protected virtual void OnBetrayal()
		{
		}

		// Token: 0x06000D88 RID: 3464 RVA: 0x000437C0 File Offset: 0x000419C0
		public virtual void OnCanceled()
		{
		}

		// Token: 0x06000D89 RID: 3465 RVA: 0x000437C2 File Offset: 0x000419C2
		public virtual bool QuestPreconditions()
		{
			return false;
		}

		// Token: 0x06000D8A RID: 3466 RVA: 0x000437C5 File Offset: 0x000419C5
		public virtual void OnHeroCanHaveQuestOrIssueInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D8B RID: 3467 RVA: 0x000437C7 File Offset: 0x000419C7
		public virtual void OnHeroCanMarryInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D8C RID: 3468 RVA: 0x000437C9 File Offset: 0x000419C9
		public virtual void OnHeroCanLeadPartyInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D8D RID: 3469 RVA: 0x000437CB File Offset: 0x000419CB
		public virtual void OnHeroCanHavePartyRoleOrBeGovernorInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D8E RID: 3470 RVA: 0x000437CD File Offset: 0x000419CD
		public virtual void OnHeroCanDieInfoIsRequested(Hero hero, KillCharacterAction.KillCharacterActionDetail causeOfDeath, ref bool result)
		{
			result = (!hero.IsNotable || hero != this.QuestGiver);
		}

		// Token: 0x06000D8F RID: 3471 RVA: 0x000437E8 File Offset: 0x000419E8
		public virtual void OnHeroCanBecomePrisonerInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D90 RID: 3472 RVA: 0x000437EA File Offset: 0x000419EA
		public virtual void OnHeroCanBeSelectedInInventoryInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x06000D91 RID: 3473 RVA: 0x000437EC File Offset: 0x000419EC
		public virtual void OnHeroCanMoveToSettlementInfoIsRequested(Hero hero, ref bool result)
		{
		}

		// Token: 0x040003D7 RID: 983
		[SaveableField(100)]
		private QuestBase.QuestStates _questState;

		// Token: 0x040003D9 RID: 985
		protected DialogFlow OfferDialogFlow;

		// Token: 0x040003DA RID: 986
		protected DialogFlow DiscussDialogFlow;

		// Token: 0x040003DB RID: 987
		protected DialogFlow QuestCharacterDialogFlow;

		// Token: 0x040003DC RID: 988
		[SaveableField(102)]
		private MBList<QuestTaskBase> _taskList;

		// Token: 0x040003DD RID: 989
		[SaveableField(103)]
		private readonly MBList<JournalLog> _journalEntries;

		// Token: 0x040003DF RID: 991
		[SaveableField(106)]
		private Hero _questGiver;

		// Token: 0x040003E1 RID: 993
		[SaveableField(107)]
		public readonly int RewardGold;

		// Token: 0x020004B7 RID: 1207
		internal enum QuestStates
		{
			// Token: 0x0400145E RID: 5214
			Ongoing,
			// Token: 0x0400145F RID: 5215
			Finalized
		}

		// Token: 0x020004B8 RID: 1208
		public enum QuestCompleteDetails
		{
			// Token: 0x04001461 RID: 5217
			Invalid,
			// Token: 0x04001462 RID: 5218
			Success,
			// Token: 0x04001463 RID: 5219
			Cancel,
			// Token: 0x04001464 RID: 5220
			Fail,
			// Token: 0x04001465 RID: 5221
			Timeout,
			// Token: 0x04001466 RID: 5222
			FailWithBetrayal
		}
	}
}
