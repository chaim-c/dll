using System;
using TaleWorlds.CampaignSystem.ViewModelCollection.WeaponCrafting;
using TaleWorlds.GauntletUI;
using TaleWorlds.GauntletUI.BaseTypes;
using TaleWorlds.GauntletUI.Data;
using TaleWorlds.GauntletUI.Layout;
using TaleWorlds.Library;

namespace SandBox.GauntletUI.AutoGenerated1
{
	// Token: 0x02000092 RID: 146
	public class Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_24_CraftingPropertyList__DependendPrefab : ListPanel
	{
		// Token: 0x06002CA6 RID: 11430 RVA: 0x00174467 File Offset: 0x00172667
		public Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_24_CraftingPropertyList__DependendPrefab(UIContext context) : base(context)
		{
		}

		// Token: 0x06002CA7 RID: 11431 RVA: 0x00174470 File Offset: 0x00172670
		public void CreateWidgets()
		{
			this._widget = this;
		}

		// Token: 0x06002CA8 RID: 11432 RVA: 0x00174479 File Offset: 0x00172679
		public void SetIds()
		{
		}

		// Token: 0x06002CA9 RID: 11433 RVA: 0x0017447B File Offset: 0x0017267B
		public void SetAttributes()
		{
			base.WidthSizePolicy = SizePolicy.StretchToParent;
			base.HeightSizePolicy = SizePolicy.CoverChildren;
			base.StackLayout.LayoutMethod = LayoutMethod.VerticalBottomToTop;
		}

		// Token: 0x06002CAA RID: 11434 RVA: 0x00174498 File Offset: 0x00172698
		public void DestroyDataSource()
		{
			if (this._datasource_Root != null)
			{
				this._datasource_Root.ListChanged -= this.OnList_datasource_RootChanged;
				for (int i = this._widget.ChildCount - 1; i >= 0; i--)
				{
					Widget child = this._widget.GetChild(i);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child).OnBeforeRemovedChild(child);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)this._widget.GetChild(i)).DestroyDataSource();
				}
				this._datasource_Root = null;
			}
		}

		// Token: 0x06002CAB RID: 11435 RVA: 0x00174512 File Offset: 0x00172712
		public void SetDataSource(MBBindingList<CraftingListPropertyItem> dataSource)
		{
			this.RefreshDataSource_datasource_Root(dataSource);
		}

		// Token: 0x06002CAC RID: 11436 RVA: 0x0017451C File Offset: 0x0017271C
		public void OnList_datasource_RootChanged(object sender, ListChangedEventArgs e)
		{
			switch (e.ListChangedType)
			{
			case ListChangedType.Reset:
				for (int i = this._widget.ChildCount - 1; i >= 0; i--)
				{
					Widget child = this._widget.GetChild(i);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child).OnBeforeRemovedChild(child);
					Widget child2 = this._widget.GetChild(i);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child2).SetDataSource(null);
					this._widget.RemoveChild(child2);
				}
				return;
			case ListChangedType.Sorted:
				for (int j = 0; j < this._datasource_Root.Count; j++)
				{
					CraftingListPropertyItem bindingObject = this._datasource_Root[j];
					this._widget.FindChild((Widget widget) => widget.GetComponent<GeneratedWidgetData>().Data == bindingObject).SetSiblingIndex(j, false);
				}
				return;
			case ListChangedType.ItemAdded:
			{
				Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate = new Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate(base.Context);
				GeneratedWidgetData generatedWidgetData = new GeneratedWidgetData(crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate);
				CraftingListPropertyItem craftingListPropertyItem = this._datasource_Root[e.NewIndex];
				generatedWidgetData.Data = craftingListPropertyItem;
				crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.AddComponent(generatedWidgetData);
				this._widget.AddChildAtIndex(crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate, e.NewIndex);
				crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.CreateWidgets();
				crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetIds();
				crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetAttributes();
				crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetDataSource(craftingListPropertyItem);
				return;
			}
			case ListChangedType.ItemBeforeDeleted:
			{
				Widget child3 = this._widget.GetChild(e.NewIndex);
				((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child3).OnBeforeRemovedChild(child3);
				return;
			}
			case ListChangedType.ItemDeleted:
			{
				Widget child4 = this._widget.GetChild(e.NewIndex);
				((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child4).SetDataSource(null);
				this._widget.RemoveChild(child4);
				break;
			}
			case ListChangedType.ItemChanged:
				break;
			default:
				return;
			}
		}

		// Token: 0x06002CAD RID: 11437 RVA: 0x001746B8 File Offset: 0x001728B8
		private void RefreshDataSource_datasource_Root(MBBindingList<CraftingListPropertyItem> newDataSource)
		{
			if (this._datasource_Root != null)
			{
				this._datasource_Root.ListChanged -= this.OnList_datasource_RootChanged;
				for (int i = this._widget.ChildCount - 1; i >= 0; i--)
				{
					Widget child = this._widget.GetChild(i);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child).OnBeforeRemovedChild(child);
					Widget child2 = this._widget.GetChild(i);
					((Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate)child2).SetDataSource(null);
					this._widget.RemoveChild(child2);
				}
				this._datasource_Root = null;
			}
			this._datasource_Root = newDataSource;
			if (this._datasource_Root != null)
			{
				this._datasource_Root.ListChanged += this.OnList_datasource_RootChanged;
				for (int j = 0; j < this._datasource_Root.Count; j++)
				{
					Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate = new Crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate(base.Context);
					GeneratedWidgetData generatedWidgetData = new GeneratedWidgetData(crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate);
					CraftingListPropertyItem craftingListPropertyItem = this._datasource_Root[j];
					generatedWidgetData.Data = craftingListPropertyItem;
					crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.AddComponent(generatedWidgetData);
					this._widget.AddChildAtIndex(crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate, j);
					crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.CreateWidgets();
					crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetIds();
					crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetAttributes();
					crafting__TaleWorlds_CampaignSystem_ViewModelCollection_WeaponCrafting_CraftingVM_Dependency_42_ItemTemplate.SetDataSource(craftingListPropertyItem);
				}
			}
		}

		// Token: 0x040009C3 RID: 2499
		private ListPanel _widget;

		// Token: 0x040009C4 RID: 2500
		private MBBindingList<CraftingListPropertyItem> _datasource_Root;
	}
}
